<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>Protobyte Library: /Users/ira/Dropbox/ira_dev/protobyte_research/other_libs/gl/Headers/CGLIOSurface.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Protobyte Library
   &#160;<span id="projectnumber">001</span>
   </div>
   <div id="projectbrief">Grpahics library for organic form and simuilated life study development</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_2de45ecb74c60ac268d7d4b2a625789f.html">protobyte_research</a></li><li class="navelem"><a class="el" href="dir_a4a440f8a6bd624e94688c89a53860e7.html">other_libs</a></li><li class="navelem"><a class="el" href="dir_80116251db96b58bd5764e848171649b.html">gl</a></li><li class="navelem"><a class="el" href="dir_ee5c19d8e9a01a3dc46399f307052a3a.html">Headers</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">CGLIOSurface.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;AvailabilityMacros.h&gt;</code><br/>
<code>#include &lt;OpenGL/CGLTypes.h&gt;</code><br/>
<code>#include &lt;OpenGL/gltypes.h&gt;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for CGLIOSurface.h:</div>
<div class="dyncontent">
<div class="center"><img src="_c_g_l_i_o_surface_8h__incl.png" border="0" usemap="#_2_users_2ira_2_dropbox_2ira__dev_2protobyte__research_2other__libs_2gl_2_headers_2_c_g_l_i_o_surface_8h" alt=""/></div>
<map name="_2_users_2ira_2_dropbox_2ira__dev_2protobyte__research_2other__libs_2gl_2_headers_2_c_g_l_i_o_surface_8h" id="_2_users_2ira_2_dropbox_2ira__dev_2protobyte__research_2other__libs_2gl_2_headers_2_c_g_l_i_o_surface_8h">
</map>
</div>
</div>
<p><a href="_c_g_l_i_o_surface_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ad208861fd3403603c1dfea8e618782e2"><td class="memItemLeft" align="right" valign="top">typedef struct __IOSurface *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_c_g_l_i_o_surface_8h.html#ad208861fd3403603c1dfea8e618782e2">IOSurfaceRef</a></td></tr>
<tr class="separator:ad208861fd3403603c1dfea8e618782e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a3f2eb8f3f78e30155bdc0d11d8201536"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_c_g_l_types_8h.html#a2399900bd350ab39568218de4a313d6f">CGLError</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_c_g_l_i_o_surface_8h.html#a3f2eb8f3f78e30155bdc0d11d8201536">CGLTexImageIOSurface2D</a> (<a class="el" href="_c_g_l_types_8h.html#a5b0a3a409f962ed24f2808f44a1e73ab">CGLContextObj</a> ctx, <a class="el" href="gl_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> <a class="el" href="gl3ext_8h.html#af9d0cbbbeb7414e786c41899e5a856d7">target</a>, <a class="el" href="gl_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> internal_format, <a class="el" href="gl_8h.html#a9289d5b99dc1f27f01480360f2e18ae0">GLsizei</a> <a class="el" href="gl3_8h.html#a9d14ddc31c6c8b61f3fe3679ab976133">width</a>, <a class="el" href="gl_8h.html#a9289d5b99dc1f27f01480360f2e18ae0">GLsizei</a> <a class="el" href="gl3_8h.html#a67001679ebf2bb0ba972db4d29c6550c">height</a>, <a class="el" href="gl_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> <a class="el" href="gl3_8h.html#a3f8f226b5004bbc9a172e2bbf28ed102">format</a>, <a class="el" href="gl_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> <a class="el" href="gl3_8h.html#a984aabed544368e7fe0e566d7cf014a7">type</a>, <a class="el" href="_c_g_l_i_o_surface_8h.html#ad208861fd3403603c1dfea8e618782e2">IOSurfaceRef</a> ioSurface, <a class="el" href="gl_8h.html#a68c4714e43d8e827d80759f9cb864f3c">GLuint</a> plane) AVAILABLE_MAC_OS_X_VERSION_10_6_AND_LATER</td></tr>
<tr class="separator:a3f2eb8f3f78e30155bdc0d11d8201536"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="ad208861fd3403603c1dfea8e618782e2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct __IOSurface* <a class="el" href="_c_g_l_i_o_surface_8h.html#ad208861fd3403603c1dfea8e618782e2">IOSurfaceRef</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_c_g_l_i_o_surface_8h_source.html#l00016">16</a> of file <a class="el" href="_c_g_l_i_o_surface_8h_source.html">CGLIOSurface.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a3f2eb8f3f78e30155bdc0d11d8201536"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_c_g_l_types_8h.html#a2399900bd350ab39568218de4a313d6f">CGLError</a> CGLTexImageIOSurface2D </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_c_g_l_types_8h.html#a5b0a3a409f962ed24f2808f44a1e73ab">CGLContextObj</a>&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="gl_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a>&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="gl_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a>&#160;</td>
          <td class="paramname"><em>internal_format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="gl_8h.html#a9289d5b99dc1f27f01480360f2e18ae0">GLsizei</a>&#160;</td>
          <td class="paramname"><em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="gl_8h.html#a9289d5b99dc1f27f01480360f2e18ae0">GLsizei</a>&#160;</td>
          <td class="paramname"><em>height</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="gl_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a>&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="gl_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_c_g_l_i_o_surface_8h.html#ad208861fd3403603c1dfea8e618782e2">IOSurfaceRef</a>&#160;</td>
          <td class="paramname"><em>ioSurface</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="gl_8h.html#a68c4714e43d8e827d80759f9cb864f3c">GLuint</a>&#160;</td>
          <td class="paramname"><em>plane</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>CGLTexImageIOSurface2D</p>
<p><a class="el" href="_c_g_l_i_o_surface_8h.html#a3f2eb8f3f78e30155bdc0d11d8201536">CGLTexImageIOSurface2D()</a> allows you to bind a single image plane from an IOSurfaceRef to an OpenGL texture object. It is the rough equivalent to <a class="el" href="gl_8h.html#a3d27abf49091d74a00148325089ff314">glTexImage2D()</a>, except that the underlying source data comes from an IOSurface rather than from an explicit pointer. Note that unlike <a class="el" href="gl_8h.html#a3d27abf49091d74a00148325089ff314">glTexImage2D()</a>, the binding is "live", in that if the contents of the IOSurface change, the contents become visible to OpenGL without making another call to <a class="el" href="_c_g_l_i_o_surface_8h.html#a3f2eb8f3f78e30155bdc0d11d8201536">CGLTexImageIOSurface2D()</a>. That being said, there are a few synchronization things to worry about if you are using IOSurface to pass data between contexts and/or different processes, or between the CPU and OpenGL.</p>
<p>In general IOSurface follows Apple's cross-context synchronization rules for OpenGL. Put simply, in order for changes done to an IOSurface on context A to become visible to context B, you must flush context A's command stream (via an explicit call to glFlush, glFlushRenderAPPLE, etc.), and then perform a 'bind' (in this case, <a class="el" href="gl_8h.html#afe003e6230fca703d59ec52260f7bdd1">glBindTexture()</a>) on context B. Note that in the case of an IOSurface backed texture used as a color buffer attachment for an FBO, you are only required to call <a class="el" href="glext_8h.html#aa52356037e3eb3eada0a24fb5f23c220">glBindFramebuffer()</a> again. You do not have to call <a class="el" href="glext_8h.html#ae40f56c057bf00620bdb55315ae3c69e">glFramebufferTexture2D()</a>.</p>
<p>Likewise, if you make changes to an IOSurface with the CPU, you <em>must</em> wrap those changes with calls to IOSurfaceLock() and IOSurfaceUnlock(), and call <a class="el" href="gl_8h.html#afe003e6230fca703d59ec52260f7bdd1">glBindTexture()</a> again for OpenGL to pick up the changes.</p>
<p>Going in the other direction, if you want changes made with OpenGL to an IOSurface to become visible to the CPU, you must also perform an explicit flush of the OpenGL context before calling IOSurfaceLock(), or you may not get the most recent data.</p>
<p>IOSurface and OpenGL make no guarantees about correctness if these rules are not followed.</p>
<p>Because of the way IOSurface is currently implemented, it does not allow for any kind of automatic format conversion to take place between the data in the IOSurface and the data seen by the GPU. This means that OpenGL is going to interpret the data in the IOSurface exactly as how it is specified by the format and type parameters passed to <a class="el" href="_c_g_l_i_o_surface_8h.html#a3f2eb8f3f78e30155bdc0d11d8201536">CGLTexImageIOSurface2D()</a>.</p>
<p>The upshot if this is that the only supported format/type combinations are those that have exact matching hardware formats. The table at the bottom of this file lists the format/type/ internalFormat combinations that are supported in Mac OS X 10.6.</p>
<p>In cases where a given format/type combination has both an Internal Format and Sized Internal Format, either one may be used.</p>
<p>Note that CGLTexImageIOSurface2D for the most part doesn't care what the pixel format or bytes per element of the IOSurface is. Instead it only enforces the rule that there must be enough data in the plane being bound to cover what is required by the width/height/format/type parameters. However, if you are using the IOSurface texture as a color buffer attachment to an FBO, then you must ensure that the bytes per element value of the IOSurface must match the effective bytes per pixel value for the format and type combination you are passing to OpenGL.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ctx</td><td>The CGLContextObj for the OpenGL context you are using </td></tr>
    <tr><td class="paramname">target</td><td>Must currently be GL_TEXTURE_RECTANGLE_ARB as of Mac OS X 10.6.0. </td></tr>
    <tr><td class="paramname">internal_format</td><td>One of the supported values from the table below that matches the format/type combination. </td></tr>
    <tr><td class="paramname">width</td><td>The width of the texture in pixels. </td></tr>
    <tr><td class="paramname">height</td><td>The height of the texture in pixels. </td></tr>
    <tr><td class="paramname">format</td><td>The OpenGL texture format enum </td></tr>
    <tr><td class="paramname">type</td><td>The OpenGL texture type enum </td></tr>
    <tr><td class="paramname">ioSurface</td><td>The IOSurfaceRef this texture is being bound to </td></tr>
    <tr><td class="paramname">plane</td><td>Which plane of the IOSurface this texture is being bound to </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Mar 27 2013 17:17:34 for Protobyte Library by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.3.1
</small></address>
</body>
</html>
