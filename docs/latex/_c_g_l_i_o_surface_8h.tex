\hypertarget{_c_g_l_i_o_surface_8h}{\section{/\-Users/ira/\-Dropbox/ira\-\_\-dev/protobyte\-\_\-research/other\-\_\-libs/gl/\-Headers/\-C\-G\-L\-I\-O\-Surface.h File Reference}
\label{_c_g_l_i_o_surface_8h}\index{/\-Users/ira/\-Dropbox/ira\-\_\-dev/protobyte\-\_\-research/other\-\_\-libs/gl/\-Headers/\-C\-G\-L\-I\-O\-Surface.\-h@{/\-Users/ira/\-Dropbox/ira\-\_\-dev/protobyte\-\_\-research/other\-\_\-libs/gl/\-Headers/\-C\-G\-L\-I\-O\-Surface.\-h}}
}
{\ttfamily \#include $<$Availability\-Macros.\-h$>$}\\*
{\ttfamily \#include $<$Open\-G\-L/\-C\-G\-L\-Types.\-h$>$}\\*
{\ttfamily \#include $<$Open\-G\-L/gltypes.\-h$>$}\\*
Include dependency graph for C\-G\-L\-I\-O\-Surface.\-h\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{_c_g_l_i_o_surface_8h__incl}
\end{center}
\end{figure}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef struct \-\_\-\-\_\-\-I\-O\-Surface $\ast$ \hyperlink{_c_g_l_i_o_surface_8h_ad208861fd3403603c1dfea8e618782e2}{I\-O\-Surface\-Ref}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{_c_g_l_types_8h_a2399900bd350ab39568218de4a313d6f}{C\-G\-L\-Error} \hyperlink{_c_g_l_i_o_surface_8h_a3f2eb8f3f78e30155bdc0d11d8201536}{C\-G\-L\-Tex\-Image\-I\-O\-Surface2\-D} (\hyperlink{_c_g_l_types_8h_a5b0a3a409f962ed24f2808f44a1e73ab}{C\-G\-L\-Context\-Obj} ctx, \hyperlink{gl_8h_a5d5233918a454ad3975c620a69ac5f0b}{G\-Lenum} \hyperlink{gl3ext_8h_af9d0cbbbeb7414e786c41899e5a856d7}{target}, \hyperlink{gl_8h_a5d5233918a454ad3975c620a69ac5f0b}{G\-Lenum} internal\-\_\-format, \hyperlink{gl_8h_a9289d5b99dc1f27f01480360f2e18ae0}{G\-Lsizei} \hyperlink{gl3_8h_a9d14ddc31c6c8b61f3fe3679ab976133}{width}, \hyperlink{gl_8h_a9289d5b99dc1f27f01480360f2e18ae0}{G\-Lsizei} \hyperlink{gl3_8h_a67001679ebf2bb0ba972db4d29c6550c}{height}, \hyperlink{gl_8h_a5d5233918a454ad3975c620a69ac5f0b}{G\-Lenum} \hyperlink{gl3_8h_a3f8f226b5004bbc9a172e2bbf28ed102}{format}, \hyperlink{gl_8h_a5d5233918a454ad3975c620a69ac5f0b}{G\-Lenum} \hyperlink{gl3_8h_a984aabed544368e7fe0e566d7cf014a7}{type}, \hyperlink{_c_g_l_i_o_surface_8h_ad208861fd3403603c1dfea8e618782e2}{I\-O\-Surface\-Ref} io\-Surface, \hyperlink{gl_8h_a68c4714e43d8e827d80759f9cb864f3c}{G\-Luint} plane) A\-V\-A\-I\-L\-A\-B\-L\-E\-\_\-\-M\-A\-C\-\_\-\-O\-S\-\_\-\-X\-\_\-\-V\-E\-R\-S\-I\-O\-N\-\_\-10\-\_\-6\-\_\-\-A\-N\-D\-\_\-\-L\-A\-T\-E\-R
\end{DoxyCompactItemize}


\subsection{Typedef Documentation}
\hypertarget{_c_g_l_i_o_surface_8h_ad208861fd3403603c1dfea8e618782e2}{\index{C\-G\-L\-I\-O\-Surface.\-h@{C\-G\-L\-I\-O\-Surface.\-h}!I\-O\-Surface\-Ref@{I\-O\-Surface\-Ref}}
\index{I\-O\-Surface\-Ref@{I\-O\-Surface\-Ref}!CGLIOSurface.h@{C\-G\-L\-I\-O\-Surface.\-h}}
\subsubsection[{I\-O\-Surface\-Ref}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct \-\_\-\-\_\-\-I\-O\-Surface$\ast$ {\bf I\-O\-Surface\-Ref}}}\label{_c_g_l_i_o_surface_8h_ad208861fd3403603c1dfea8e618782e2}


Definition at line 16 of file C\-G\-L\-I\-O\-Surface.\-h.



\subsection{Function Documentation}
\hypertarget{_c_g_l_i_o_surface_8h_a3f2eb8f3f78e30155bdc0d11d8201536}{\index{C\-G\-L\-I\-O\-Surface.\-h@{C\-G\-L\-I\-O\-Surface.\-h}!C\-G\-L\-Tex\-Image\-I\-O\-Surface2\-D@{C\-G\-L\-Tex\-Image\-I\-O\-Surface2\-D}}
\index{C\-G\-L\-Tex\-Image\-I\-O\-Surface2\-D@{C\-G\-L\-Tex\-Image\-I\-O\-Surface2\-D}!CGLIOSurface.h@{C\-G\-L\-I\-O\-Surface.\-h}}
\subsubsection[{C\-G\-L\-Tex\-Image\-I\-O\-Surface2\-D}]{\setlength{\rightskip}{0pt plus 5cm}{\bf C\-G\-L\-Error} C\-G\-L\-Tex\-Image\-I\-O\-Surface2\-D (
\begin{DoxyParamCaption}
\item[{{\bf C\-G\-L\-Context\-Obj}}]{ctx, }
\item[{{\bf G\-Lenum}}]{target, }
\item[{{\bf G\-Lenum}}]{internal\-\_\-format, }
\item[{{\bf G\-Lsizei}}]{width, }
\item[{{\bf G\-Lsizei}}]{height, }
\item[{{\bf G\-Lenum}}]{format, }
\item[{{\bf G\-Lenum}}]{type, }
\item[{{\bf I\-O\-Surface\-Ref}}]{io\-Surface, }
\item[{{\bf G\-Luint}}]{plane}
\end{DoxyParamCaption}
)}}\label{_c_g_l_i_o_surface_8h_a3f2eb8f3f78e30155bdc0d11d8201536}
C\-G\-L\-Tex\-Image\-I\-O\-Surface2\-D

\hyperlink{_c_g_l_i_o_surface_8h_a3f2eb8f3f78e30155bdc0d11d8201536}{C\-G\-L\-Tex\-Image\-I\-O\-Surface2\-D()} allows you to bind a single image plane from an I\-O\-Surface\-Ref to an Open\-G\-L texture object. It is the rough equivalent to \hyperlink{gl_8h_a3d27abf49091d74a00148325089ff314}{gl\-Tex\-Image2\-D()}, except that the underlying source data comes from an I\-O\-Surface rather than from an explicit pointer. Note that unlike \hyperlink{gl_8h_a3d27abf49091d74a00148325089ff314}{gl\-Tex\-Image2\-D()}, the binding is \char`\"{}live\char`\"{}, in that if the contents of the I\-O\-Surface change, the contents become visible to Open\-G\-L without making another call to \hyperlink{_c_g_l_i_o_surface_8h_a3f2eb8f3f78e30155bdc0d11d8201536}{C\-G\-L\-Tex\-Image\-I\-O\-Surface2\-D()}. That being said, there are a few synchronization things to worry about if you are using I\-O\-Surface to pass data between contexts and/or different processes, or between the C\-P\-U and Open\-G\-L.

In general I\-O\-Surface follows Apple's cross-\/context synchronization rules for Open\-G\-L. Put simply, in order for changes done to an I\-O\-Surface on context A to become visible to context B, you must flush context A's command stream (via an explicit call to gl\-Flush, gl\-Flush\-Render\-A\-P\-P\-L\-E, etc.), and then perform a 'bind' (in this case, \hyperlink{gl_8h_afe003e6230fca703d59ec52260f7bdd1}{gl\-Bind\-Texture()}) on context B. Note that in the case of an I\-O\-Surface backed texture used as a color buffer attachment for an F\-B\-O, you are only required to call \hyperlink{glext_8h_aa52356037e3eb3eada0a24fb5f23c220}{gl\-Bind\-Framebuffer()} again. You do not have to call \hyperlink{glext_8h_ae40f56c057bf00620bdb55315ae3c69e}{gl\-Framebuffer\-Texture2\-D()}.

Likewise, if you make changes to an I\-O\-Surface with the C\-P\-U, you {\itshape must} wrap those changes with calls to I\-O\-Surface\-Lock() and I\-O\-Surface\-Unlock(), and call \hyperlink{gl_8h_afe003e6230fca703d59ec52260f7bdd1}{gl\-Bind\-Texture()} again for Open\-G\-L to pick up the changes.

Going in the other direction, if you want changes made with Open\-G\-L to an I\-O\-Surface to become visible to the C\-P\-U, you must also perform an explicit flush of the Open\-G\-L context before calling I\-O\-Surface\-Lock(), or you may not get the most recent data.

I\-O\-Surface and Open\-G\-L make no guarantees about correctness if these rules are not followed.

Because of the way I\-O\-Surface is currently implemented, it does not allow for any kind of automatic format conversion to take place between the data in the I\-O\-Surface and the data seen by the G\-P\-U. This means that Open\-G\-L is going to interpret the data in the I\-O\-Surface exactly as how it is specified by the format and type parameters passed to \hyperlink{_c_g_l_i_o_surface_8h_a3f2eb8f3f78e30155bdc0d11d8201536}{C\-G\-L\-Tex\-Image\-I\-O\-Surface2\-D()}.

The upshot if this is that the only supported format/type combinations are those that have exact matching hardware formats. The table at the bottom of this file lists the format/type/ internal\-Format combinations that are supported in Mac O\-S X 10.\-6.

In cases where a given format/type combination has both an Internal Format and Sized Internal Format, either one may be used.

Note that C\-G\-L\-Tex\-Image\-I\-O\-Surface2\-D for the most part doesn't care what the pixel format or bytes per element of the I\-O\-Surface is. Instead it only enforces the rule that there must be enough data in the plane being bound to cover what is required by the width/height/format/type parameters. However, if you are using the I\-O\-Surface texture as a color buffer attachment to an F\-B\-O, then you must ensure that the bytes per element value of the I\-O\-Surface must match the effective bytes per pixel value for the format and type combination you are passing to Open\-G\-L.


\begin{DoxyParams}{Parameters}
{\em ctx} & The C\-G\-L\-Context\-Obj for the Open\-G\-L context you are using \\
\hline
{\em target} & Must currently be G\-L\-\_\-\-T\-E\-X\-T\-U\-R\-E\-\_\-\-R\-E\-C\-T\-A\-N\-G\-L\-E\-\_\-\-A\-R\-B as of Mac O\-S X 10.\-6.\-0. \\
\hline
{\em internal\-\_\-format} & One of the supported values from the table below that matches the format/type combination. \\
\hline
{\em width} & The width of the texture in pixels. \\
\hline
{\em height} & The height of the texture in pixels. \\
\hline
{\em format} & The Open\-G\-L texture format enum \\
\hline
{\em type} & The Open\-G\-L texture type enum \\
\hline
{\em io\-Surface} & The I\-O\-Surface\-Ref this texture is being bound to \\
\hline
{\em plane} & Which plane of the I\-O\-Surface this texture is being bound to \\
\hline
\end{DoxyParams}
